<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <meta name="description" content="Just a normal website (aka melonlinks website)">
    <link rel="stylesheet" href="/static/css/hotelreg.css">
    <link rel="stylesheet" href="/static/css/uni.css">
    <script src="https://www.google.com/recaptcha/api.js" async defer></script>
    <link rel="icon" type="image/x-icon" href="/static/imgs/favicon.ico">
    <title>Melonlinks - Hotel History</title>
</head>
<body>
    <header>
        <nav>
            <a href="/">Home</a>
            <a href="/projects/">Projects</a>
            <a href="/files/">Files</a>
            <a href="/donate/">Donate Me!</a>
        </nav>
    </header>
    <section class="content">
        <div class="hrfoutline">
            <form class="hrform" id="hrform" netlify> <!-- hr = hotelreg -->
                <label class="hrftitle">Hotel History Database</label><br>
                <section class="subnav">
                    <button id="snl_add" href="#">Add new record</button>
                    <button id="snr_find" href="/projects/webform/hotelreg/find/">Find a record</button>
                </section>
                <hr>
                <label class="hrflabel" name="hrflabel">Hotel name <a style="color:red">*</a></label>
                <input class="hrfinput" name="hrfinput_hn" required></input><br>
                <label class="hrflabel" name="hrflabel">Where is it? <a style="color:red">*</a></label>
                <input class="hrfinput" name="hrfinput_loc" required></input><br>
                <label class="hrflabel" name="hrflabel">Check-in day</label><a style="color:red">*</a></label>
                <input type="date" class="hrfdate" name="hrfdate_in" required></input><br>
                <label class="hrflabel" name="hrflabel">Check-out day</label><a style="color:red">*</a></label>
                <input type="date" class="hrfdate" name="hrfdate_out" required></input><br>
                <label class="hrflabel" name="hrflabel">Book from where?</label><a style="color:red">*</a></label>
                <select name="bookwhere" id="bookwhere" name="hrfbookwhere" required>
                    <option value="agoda">agoda</option>
                    <option value="booking.com">booking.com</option>
                    <option value="airbnb">airbnb</option>
                </select><br>
                <label class="hrflabel" name="hrflabel">Comment</label>
                <textarea class="hrfinput_comment" name="hrfinput_comment" rows="3" cols="40"></textarea><br>
                <label class="hrflabel" name="hrflabel">Please solve recaptcha</label>
                <form action="?" method="POST">
                    <div class="g-recaptcha" data-sitekey="6LeZjOEpAAAAANr-GvoanPU_yjWUlValC0BC_bI9"></div>
                </form>
                <br>
                <input type="submit" value="Submit record"></input>

            </form>
        </div>
    </section>

    <!-- javascript form submit, using AJAX-->
    <script>
        const handleSubmit = (event) => {
            event.preventDefault();

            const myForm = event.target;
            const formData = new FormData(myForm);

            fetch("/", {
                method: "POST",
                headers: { "Content-Type": "application/x-www-form-urlencoded" },
                body: new URLSearchParams(formData).toString(),
            })
                .then(() => console.log("Form successfully submitted"))
                .catch((error) => alert(error));
        };

        document
        .querySelector("form")
        .addEventListener("submit", handleSubmit);

    </script>
</body>
</html>